@page "/"
@using System.Security.Claims
@using System.Text.Json
@using System.Text.Json.Serialization
@rendermode InteractiveServer
<PageTitle>Home</PageTitle>

<Dashboard @rendermode="InteractiveServer"/>

<AuthorizeView>
    <Authorized>
        <p>IsInRole: @_authenticationState?.User.IsInRole("rol_4V5SuiKlx7sqNTeB")</p>

        <pre >
            @JsonSerializer.Serialize(_authenticationState?.User, new JsonSerializerOptions()
            {
                ReferenceHandler = ReferenceHandler.Preserve,
                WriteIndented = true
            });
        </pre>
    </Authorized>
    <NotAuthorized>
        <p>Not authorized</p>
    </NotAuthorized>
</AuthorizeView>


@code{
    [CascadingParameter]
    public Task<AuthenticationState>? AuthentiationState { get; set; }

    private AuthenticationState? _authenticationState;

    protected override async Task OnInitializedAsync()
    {
        if (AuthentiationState != null)
        {
            _authenticationState = await AuthentiationState;
            StateHasChanged();
        }

        await base.OnInitializedAsync();
    }

}
